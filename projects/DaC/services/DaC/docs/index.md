# Techdoc - DaC Template

This is the technical documentation for using the DaC Service in Backstage.

## Parameters
Backstage `Create` service will ask the user for the following parameters: 

### Service Parameters
Enter the service parameters, which specifies the way the template will be registered in Backstage:

- `Code` ... Each code represents an XXX-as-Code service, such as DaC, DHIaC, DMaC, DPaC, etc.
- `Title` ... Title to be shown in Backstage.
- `Description` ... Fair description of the service, also shown in Backstage.

### Repository Location
The owner and repository name uniquely identifies the place in GitHub, where the generated code will be stored.

- `Owner` ... the owner is the first token in GitHub's bread crumb string, top left corner of the screen.
- `Repository Name` ... we suggest a unique name by concadenating *"repo" with the [Code]* parameter.

### Review
All parameters will be displayed on the screen for review. Press the `CREATE` button if everything looks right. Backstage will start generating software as described in the next section.

---

## Generated Code
Upon successful execution of the service, Backstage will create the following files in the repository:

- `template.yaml` ... specification for Backstage registration and behaviour, including parameters and steps, similar to the one below...

```yaml
apiVersion: scaffolder.backstage.io/v1beta3
kind: Template
metadata:
  name: ${{ Code }}
  title: ${{ Title }} 
  description: ${{ Description }}
  annotations:
    backstage.io/techdocs-ref: dir:.
  tags:
    - recommended
# put other tags here as required
spec:
  owner: user:guest
  type: DaC
  parameters:
    - title: Service Parameters
      required:
        - Code
        - Title
        - Description
      properties:
        Code:
          title: Code
          type: string
          description: Each code represents an XXX-as-Code service, such as DaC, DHIaC, DMaC, DPaC, etc.
          maxLength: 20
          default: XXXaC
          ui:autofocus: true
# Put other parameters here as required
  steps:
    - id: fetch-base
      name: Fetch Base
      action: fetch:template
      input:
        url: ./content
        values:
          Code: ${{ parameters.Code }}
          Title: ${{ parameters.Title }}
          Description: ${{ parameters.Description }}
# Put other steps here as required
  output:
    links:
      - title: Repository
        url: ${{ steps['publish'].output.remoteUrl }}
      - title: Open in catalog
        icon: catalog
        entityRef: ${{ steps['register'].output.entityRef }}
```
  
- `docs` ... folder containing documentation for this component, to be rendered in Backstage as `Techdocs`. MD files (markdown) similar to the one below...

```Markdown
# Techdoc - ${{ Code }} Template

This is the technical documentation for the ${{ Code }} service. It was generated by the `DaC Service` in Backstage.

## Source - Explicit Parameters
As entered by the Backstage user:

- `Code` ${{ Code }}
- `Title` ${{ Title }}
- `Description` ${{ Description }}

# Put more documentation here

...
...
```
