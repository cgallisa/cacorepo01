# Techdoc - DMaC Template

This is the technical documentation for using the DMaC Service in Backstage.

## Parameters
Backstage `Create` service will ask the user for parameters, as shown below. 

### ID Parameters
These parameters are used to uniquely identify a Data Metric (DM) component:

- `Source` ... usually an application name or database name where the table to be replicated resides. Best practice calls for aligning to `source names in Alation`.
- `Schema` ... Schema name within the *source* stated above.
- `Table` ... Name of the table to be replicated.

### Metrics Parameters
This is an array of metrics. Each item uniquely identifies a metric and the corresponding rule.

- `Column` ... name of the column to be validated.
- `Rule` ... drop down list of available rules to be defined.
- `Threshold` ... high and low boundary values.

### Repository Location
The owner and repository name uniquely identifies the place in GitHub, where the generated code will be stored.

- `Owner` ... the owner is the first token in GitHub's bread crumb string, top left corner of the screen.
- `Repository Name` ... we suggest a unique name by concadenating *[source].[schema].[table]* parameters.

### Review
All parameters will be displayed on the screen for review. Press the `CREATE` button if everything looks right. Backstage will start generating software as described in the next section.

---

## Generated Code
Upon successful execution of the service, Backstage will create the following files in the repository:

- `code-DMaC.json` ... specification for instantiating the DM instance.

```json
{
  "FullyQualifiedSource": "Portico.PORTOWN.TABLE_20240408_1508",
  "Name": "NULL values",
  "Description": "Validation of NULL values",
...
}
```

- `catalog-info.yaml` ... specification for registering the new component in Backsatge, similar to the one below...

```yaml
apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: Portico.PORTOWN.TABLE_20240408_1508
  description: Validation of NULL values.
  annotations:
    backstage.io/techdocs-ref: dir:.
  tags:
    - structured
spec:
  type: DMaC
  owner: user:guest
  system: Snowflake-Portico-System
  dependsOn:
    - resource:Oracle
    - resource:Snowflake
    - resource:IDMC-MI
  lifecycle: V1.0
```
  
- `docs` ... folder containing documentation for this component, to be rendered in Backstage as `Techdocs`. MD files (markdown) similar to the one below...

```Markdown
# Techdoc - Portico.PORTOWN.TABLE_20240408_1508

This is the technical documentation for `Validation of NULL values.`. It was generated by the `DMaC Service` in Backstage.

## Source - Explicit Parameters
As entered by the Backstage user:

- `Source` Portico
- `Schema` PORTOWN
- `Table` TABLE_20240408_1508
...
...
```
